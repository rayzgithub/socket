<?php if (!defined('JYSYSINC'))
    exit('JYSYS:No direct script access allowed');
/**
 * 数据库接口类
 *
 * @version        $Id: dbInterface.class.php 3 20:57 2012年5月13日 $
 * @package        Jysys.Libraries
 * @copyright      Copyright (c) 2012, REY, Inc.
 * @link           http://www.joyql.com
 */
interface dbInterface
{

    /**
     * +----------------------------------------------------------
     * 连接数据库方法
     * +----------------------------------------------------------
     * @public
     * @param  array $config
     * @param  string/int $connKey
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function  connect($config='',$connKey=0);
    /**
     * 初始化数据库连接
     * @access protected
     * @param boolean $master 主服务器
     * @return void
     */
    public function initConnect($master=true);
    /**
     * +----------------------------------------------------------
     * 执行SQL
     * +----------------------------------------------------------
     * @public
     * @param SQL $sql
     * +----------------------------------------------------------
     * @return array
     * +----------------------------------------------------------
     */
    public function execute($sql);
    /**
     * +----------------------------------------------------------
     * 插入记录
     * +----------------------------------------------------------
     * @public
     * @param array $datas SQL拼接数组
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function insert($datas);
    /**
     * +----------------------------------------------------------
     * 更新记录
     * +----------------------------------------------------------
     * @public
     * @param SQL $datas SQL拼接数组
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function update($datas);
    /**
     * +----------------------------------------------------------
     * 删除表记录
     * +----------------------------------------------------------
     * @public
     * @param array $datas SQL拼接数组
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function delete($datas = array());

    /**
     * +----------------------------------------------------------
     * 通用查询语句
     * +----------------------------------------------------------
     * @public
     * @param array/SQL $datas SQL语句或SQL拼接数组
     * @param bool $cache 缓存开关
     * @param int  $cacheTime 缓存时间（单位：秒）
     * +----------------------------------------------------------
     * @return array
     * +----------------------------------------------------------
     */
    public function query($datas, $cache = false, $cacheTime = '');
    /**
     * +----------------------------------------------------------
     * 分页查询方法
     * +----------------------------------------------------------
     * @public
     * @param string $sqlCount 统计行数语句
     * @param string $sqlList 查询结果语句
     * @param array $param 扩展参数
     * +----------------------------------------------------------
     * @return array
     * +----------------------------------------------------------
     */
    public function queryPage($sqlCount,$sqlList,$param =array());
    /**
     * +----------------------------------------------------------
     * 新增字段
     * +----------------------------------------------------------
     * @public
     * @param $datas SQL拼接数组
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function addField($datas);
    /**
     * +----------------------------------------------------------
     * 修改字段
     * +----------------------------------------------------------
     * @public
     * @param $datas SQL拼接数组
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function modifyField($datas);
    /**
     * +----------------------------------------------------------
     * 删除字段
     * +----------------------------------------------------------
     * @public
     * @param $datas SQL拼接数组
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function deleteField($datas);
    /**
     * +----------------------------------------------------------
     * 添加表
     * +----------------------------------------------------------
     * @public
     * @param $datas SQL拼接数组
     * +----------------------------------------------------------
     * @return object
     * +----------------------------------------------------------
     */
    public function addTable($datas);
    /**
     * +----------------------------------------------------------
     * 开始事务
     * +----------------------------------------------------------
     * @public
     * +----------------------------------------------------------
     * @return void
     * +----------------------------------------------------------
     */
    public function beginTransaction();

    /**
     * +----------------------------------------------------------
     * 提交事务
     * +----------------------------------------------------------
     * @public
     * +----------------------------------------------------------
     * @return void
     * +----------------------------------------------------------
     */
    public function commit();

    /**
     * +----------------------------------------------------------
     * 事务回滚
     * +----------------------------------------------------------
     * @public
     * +----------------------------------------------------------
     * @return void
     * +----------------------------------------------------------
     */
    public function rollBack();
    /**
     * +----------------------------------------------------------
     * 写入缓存
     * +----------------------------------------------------------
     * @public
     * @param string $cachename 缓存识别ID
     * @param mixed $data
     * @param int  $time 缓存时间（单位：秒）
     * +----------------------------------------------------------
     * @return void
     * +----------------------------------------------------------
     */
    public function cacheSave($cachename, $data, $time = null);
    /**
     * +----------------------------------------------------------
     * 读取缓存
     * +----------------------------------------------------------
     * @public
     * @param string $cachename 缓存识别ID
     * @param int  $cachetime 缓存时间（单位：秒）
     * +----------------------------------------------------------
     * @return mixed
     * +----------------------------------------------------------
     */
    public function cacheGet($cachename, $cachetime);



}
